#!/bin/bash
# ç£ç›˜ç©ºé—´åˆ†æè„šæœ¬
# å¸®åŠ©æ‚¨å¿«é€Ÿå®šä½å ç”¨ 50GB ç©ºé—´çš„â€œå…ƒå‡¶â€

echo "=================================================="
echo "ğŸ” 1. æ€»ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µ (df -h)"
echo "=================================================="
df -h | grep -E '^Filesystem|/$'

echo ""
echo "=================================================="
echo "ğŸ³ 2. Docker èµ„æºå ç”¨ (docker system df)"
echo "   æ³¨æ„ï¼šDocker é€šå¸¸æ˜¯ä¸»è¦å ç”¨è€…"
echo "=================================================="
if command -v docker &> /dev/null; then
    docker system df -v
else
    echo "æœªå®‰è£… Docker æˆ–æ— æ³•è®¿é—®"
fi

echo ""
echo "=================================================="
echo "ğŸ“‚ 3. æ ¹ç›®å½•ä¸‹æœ€å¤§çš„ 5 ä¸ªæ–‡ä»¶å¤¹"
echo "   æ­£åœ¨æ‰«æï¼Œè¯·ç¨å€™..."
echo "=================================================="
#æ’é™¤è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
du -h --max-depth=1 / --exclude=proc --exclude=sys --exclude=dev --exclude=run 2>/dev/null | sort -hr | head -n 6

echo ""
echo "=================================================="
echo "ğŸ“„ 4. ç³»ç»Ÿä¸­æœ€å¤§çš„ 10 ä¸ªæ–‡ä»¶ (å¤§äº 100MB)"
echo "   è¿™å¯ä»¥æ‰¾å‡ºéšè—çš„å¤§æ—¥å¿—æ–‡ä»¶æˆ–å‹ç¼©åŒ…"
echo "=================================================="
find / -type f -size +100M -exec ls -lh {} \; 2>/dev/null | awk '{ print $5 " \t " $9 }' | sort -hr | head -n 10

echo ""
echo "=================================================="
echo "ğŸ’¡ åˆ†æå»ºè®®ï¼š"
echo "1. å¦‚æœ 'Images' æˆ– 'Containers' å¾ˆå¤§ -> è¿è¡Œ ./clean_docker_space.sh"
echo "2. å¦‚æœæ˜¯æŸä¸ªæ—¥å¿—æ–‡ä»¶ (å¦‚ .log) å¾ˆå¤§ -> å¯ä»¥æ‰‹åŠ¨ rm åˆ é™¤å®ƒ"
echo "3. å¦‚æœæ˜¯ /var/log/journal å¾ˆå¤§ -> è¿è¡Œ journalctl --vacuum-size=100M"
echo "=================================================="
